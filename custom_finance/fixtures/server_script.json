[
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 1,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "After Submit",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2025-04-22 11:33:57.761456",
  "module": "custom_finance",
  "name": "Revenue recording",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Revenue recording",
  "script": "# Validate that the accounts table is not empty\r\nif not doc.accounts:\r\n    frappe.throw(\"The accounts table is empty. Cannot create a Journal Entry.\")\r\n\r\n# Create a new Journal Entry\r\njournal_entry = frappe.get_doc({\r\n    \"doctype\": \"Journal Entry\",\r\n    \"voucher_type\": \"Journal Entry\",  # Adjust as needed\r\n    \"posting_date\": doc.date,  # Replace with your actual posting date field\r\n    \"accounts\": []  # Initialize the accounts table\r\n})\r\n\r\n# Populate the accounts table in the Journal Entry\r\nfor row in doc.accounts:  # Replace 'accounts' with the child table fieldname\r\n    # Skip rows where neither debit nor credit is set\r\n    if not (row.debit or row.credit):\r\n        frappe.msgprint(f\"Skipping row with account {row.account} as neither debit nor credit is set.\")\r\n        continue\r\n\r\n    # Append account entries to the Journal Entry\r\n    journal_entry.append(\"accounts\", {\r\n        \"account\": row.account,  # Replace with the field name for the account\r\n        \"debit_in_account_currency\": row.debit or 0,  # Debit amount\r\n        \"credit_in_account_currency\": row.credit or 0,  # Credit amount\r\n        \"party_type\": row.party_type,  # Optional: add party type\r\n        \"party\": row.party,  # Optional: add party\r\n        \"cost_center\": row.cost_center,  # Optional: add cost center\r\n        \"user_remark\": row.user_remark,  # Optional: add user remark\r\n    })\r\n\r\n# Save and submit the Journal Entry\r\nif journal_entry.accounts:\r\n    journal_entry.insert()\r\n    journal_entry.submit()\r\n    # Add clickable link in the success message\r\n    frappe.msgprint(f\"Journal Entry <a href='/app/journal-entry/{journal_entry.name}' target='_blank'>{journal_entry.name}</a> created successfully for Cash Transfers to Merchants {doc.name}.\")\r\nelse:\r\n    frappe.throw(\"No valid account entries were found to create a Journal Entry.\")\r\n",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 1,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "After Submit",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2025-04-22 11:33:43.120403",
  "module": "custom_finance",
  "name": "Central Bank Transfers",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Central Bank Transfers",
  "script": "# Validate that the accounts table is not empty\r\nif not doc.accounts:\r\n    frappe.throw(\"The accounts table is empty. Cannot create a Journal Entry.\")\r\n\r\n# Create a new Journal Entry\r\njournal_entry = frappe.get_doc({\r\n    \"doctype\": \"Journal Entry\",\r\n    \"voucher_type\": \"Journal Entry\",  # Adjust as needed\r\n    \"posting_date\": doc.date,  # Replace with your actual posting date field\r\n    \"accounts\": []  # Initialize the accounts table\r\n})\r\n\r\n# Populate the accounts table in the Journal Entry\r\nfor row in doc.accounts:  # Replace 'accounts' with the child table fieldname\r\n    # Skip rows where neither debit nor credit is set\r\n    if not (row.debit or row.credit):\r\n        frappe.msgprint(f\"Skipping row with account {row.account} as neither debit nor credit is set.\")\r\n        continue\r\n\r\n    # Append account entries to the Journal Entry\r\n    journal_entry.append(\"accounts\", {\r\n        \"account\": row.account,  # Replace with the field name for the account\r\n        \"debit_in_account_currency\": row.debit or 0,  # Debit amount\r\n        \"credit_in_account_currency\": row.credit or 0,  # Credit amount\r\n        \"party_type\": row.party_type,  # Optional: add party type\r\n        \"party\": row.party,  # Optional: add party\r\n        \"cost_center\": row.cost_center,  # Optional: add cost center\r\n        \"user_remark\": row.user_remark,  # Optional: add user remark\r\n    })\r\n\r\n# Save and submit the Journal Entry\r\nif journal_entry.accounts:\r\n    journal_entry.insert()\r\n    journal_entry.submit()\r\n    # Add clickable link in the success message\r\n    frappe.msgprint(f\"Journal Entry <a href='/app/journal-entry/{journal_entry.name}' target='_blank'>{journal_entry.name}</a> created successfully for Central Bank Transfers {doc.name}.\")\r\nelse:\r\n    frappe.throw(\"No valid account entries were found to create a Journal Entry.\")\r\n",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 1,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "After Submit",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2025-04-22 11:33:50.458060",
  "module": "custom_finance",
  "name": "Cheque Reconciliation",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Cheque Reconciliation",
  "script": "# Validate that the accounts table is not empty\r\nif not doc.accounts:\r\n    frappe.throw(\"The accounts table is empty. Cannot create a Journal Entry.\")\r\n\r\n# Create a new Journal Entry\r\njournal_entry = frappe.get_doc({\r\n    \"doctype\": \"Journal Entry\",\r\n    \"voucher_type\": \"Journal Entry\",  # Adjust as needed\r\n    \"posting_date\": doc.date,  # Replace with your actual posting date field\r\n    \"accounts\": []  # Initialize the accounts table\r\n})\r\n\r\n# Populate the accounts table in the Journal Entry\r\nfor row in doc.accounts:  # Replace 'accounts' with the child table fieldname\r\n    # Skip rows where neither debit nor credit is set\r\n    if not (row.debit or row.credit):\r\n        frappe.msgprint(f\"Skipping row with account {row.account} as neither debit nor credit is set.\")\r\n        continue\r\n\r\n    # Append account entries to the Journal Entry\r\n    journal_entry.append(\"accounts\", {\r\n        \"account\": row.account,  # Replace with the field name for the account\r\n        \"debit_in_account_currency\": row.debit or 0,  # Debit amount\r\n        \"credit_in_account_currency\": row.credit or 0,  # Credit amount\r\n        \"party_type\": row.party_type,  # Optional: add party type\r\n        \"party\": row.party,  # Optional: add party\r\n        \"cost_center\": row.cost_center,  # Optional: add cost center\r\n        \"user_remark\": row.user_remark,  # Optional: add user remark\r\n    })\r\n\r\n# Save and submit the Journal Entry\r\nif journal_entry.accounts:\r\n    journal_entry.insert()\r\n    journal_entry.submit()\r\n    # Add clickable link in the success message\r\n    frappe.msgprint(f\"Journal Entry <a href='/app/journal-entry/{journal_entry.name}' target='_blank'>{journal_entry.name}</a> created successfully for Cheque Reconciliation {doc.name}.\")\r\nelse:\r\n    frappe.throw(\"No valid account entries were found to create a Journal Entry.\")\r\n",
  "script_type": "DocType Event"
 }
]